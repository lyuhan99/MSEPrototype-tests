<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Pragma" name="Pragma" content="no-cache">
    <title>MSE Prototype</title>

    <!-- Bootstrap -->
    <base target="_top">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <!-- Bootstrap -->

    <!----Socket to send stuff to arduino --->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js'></script>


    <!-- Font Awesome -->
    <script src="https://use.fontawesome.com/098aba01d6.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
        integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <!-- Font Awesome -->




    <!---CSS-->
    <style>
        html,
        body {
            height: 100%;
        }

        body {
            position: relative;
            background-color: #3b3e42;
            /* background-image: url('img/Clue1.png'); */
            background-size: auto 100%;
            background-repeat: no-repeat;
            background-position: center;
        }

        .test-image {
            position: absolute;
            top: 3vw;
            left: 14vw;
            width: 70vw;
            z-index: -1;

        }

        .instruction-text {
            position: absolute;
            top: 43vw;
            left: 38.5vw;
        }

        .switch-btn {
            position: absolute;
            width: 1.5vw;
            height: 3.5vw;
            top: 33.5vw;
            left: 35vw;
            background-color: rgb(75, 75, 75);
        }

        .back-arrow {
            position: absolute;
            color: white;
            top: 3vw;
            left: 3vw;
        }

        .clue-wrapper {
            position: absolute;
            top: 17.5vw;
            left: 29vw;
        }

        .clue-image {
            position: absolute;
            top: 0vw;
            width: 7vw;
            z-index: 1;
            animation: floating 1300ms infinite;
        }

        @keyframes floating {
            0% {
                transform: translateY(0.5vw);
            }

            50% {
                transform: translateY(0vw);
            }

            100% {
                transform: translateY(0.5vw);
            }
        }

        .bubble1 {
            position: absolute;
            top: 25vw;
            left: 29vw;
            background-color: rgb(140, 209, 255);
            width: 1vw;
            height: 1vw;
            border-radius: 50%;
            z-index: 2;
            animation: bubble1 1000ms infinite, bubblefade 1000ms infinite;
        }

        .bubble2 {
            position: absolute;
            top: 24vw;
            left: 31vw;
            background-color: rgb(140, 209, 255);
            width: 1.5vw;
            height: 1.5vw;
            border-radius: 50%;
            z-index: 2;
            animation: bubble2 1200ms infinite, bubblefade 1200ms infinite;
        }

        .bubble3 {
            position: absolute;
            top: 26vw;
            left: 30vw;
            background-color: rgb(140, 209, 255);
            width: 0.7vw;
            height: 0.7vw;
            border-radius: 50%;
            z-index: 2;
            animation: bubble3 1100ms infinite, bubblefade 1100ms infinite;
        }

        .bubble4 {
            position: absolute;
            top: 15vw;
            left: 68vw;
            background-color: rgb(140, 209, 255);
            width: 1vw;
            height: 1vw;
            border-radius: 50%;
            z-index: 2;
            animation: bubble1 1000ms infinite, bubblefade 1000ms infinite;
        }

        .bubble5 {
            position: absolute;
            top: 14vw;
            left: 65vw;
            background-color: rgb(140, 209, 255);
            width: 1.5vw;
            height: 1.5vw;
            border-radius: 50%;
            z-index: 2;
            animation: bubble2 1200ms infinite, bubblefade 1200ms infinite;
        }

        .bubble6 {
            position: absolute;
            top: 16vw;
            left: 69vw;
            background-color: rgb(140, 209, 255);
            width: 0.7vw;
            height: 0.7vw;
            border-radius: 50%;
            z-index: 2;
            animation: bubble3 1100ms infinite, bubblefade 1100ms infinite;
        }

        @keyframes bubble1 {
            0% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-0.5vw);
            }

            100% {
                transform: translateY(-1vw);
            }
        }

        @keyframes bubble2 {
            0% {
                transform: translateY(0vw);
            }

            50% {
                transform: translateY(-0.7vw);
            }

            100% {
                transform: translateY(-1.4vw);
            }
        }

        @keyframes bubble3 {
            0% {
                transform: translateY(0vw);
            }

            50% {
                transform: translateY(-0.8vw);
            }

            100% {
                transform: translateY(-1.6vw);
            }
        }

        @keyframes bubblefade {
            0% {
                opacity: 60%;
            }

            50% {
                opacity: 30%;
            }

            100% {
                opacity: 0%;
            }
        }
    </style>


</head>

<body>

    <div class="container relative">
        <div class="image-wrapper">
            <img class="test-image" src="img/test-hydrodynamic.jpg">
        </div>
        <div class="clue-wrapper">
            <img class="clue-image" src="img/hydrodynamic-clue.png">
        </div>

        <div class="bubble1">
        </div>
        <div class="bubble2">
        </div>
        <div class="bubble3">
        </div>

        <div class="bubble4">
        </div>
        <div class="bubble5">
        </div>
        <div class="bubble6">
        </div>

        <div class="instruction-text row justify-content-center text-muted">
            Move the slider to control the object's speed.
        </div>

        <!-- on off button -->
        <div class="switch-btn rounded">

        </div>

        <i class="fa fa-arrow-left back-arrow fa-2x" aria-hidden="true"></i>

    </div>



    <!-- JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>


    <!-- Script -->

    <script type="text/javascript">
        $(document).ready(function () {

            var firstClueNo = window.localStorage.getItem("firstClue");

            var clueMoving = false;
            var isHydrodynamic = false;

            if (firstClueNo == "D") {
                isHydrodynamic = true;
            }

            //sending and receiving data
            var socket = io();

            var messageReceived;

            socket.on('data', function (data) {
                console.log(data);
                //data is what is received
                messageReceived = data + "";
                if (messageReceived == "slide_7") {
                    console.log(messageReceived)
                    $(".switch-btn").animate({ left: "62vw" }, 900);
                    setTimeout(function () {
                        if (isHydrodynamic) {
                            $(".instruction-text").text("Move the slider back to go back to the menu")
                            $(".clue-wrapper").animate({ left: "62vw" }, 2000);
                            $(".clue-wrapper").fadeOut();
                        } else {
                            $(".instruction-text").text("Move the slider back to go back to the menu")
                            $(".clue-wrapper").animate({ left: "62vw" }, 30000);
                            $(".clue-wrapper").fadeOut();
                        }
                        //record that test has been done
                        localStorage.setItem('firstClueHydrodynamicTest', true);
                    }, 800);
                    clueMoving = true;
                } else if (messageReceived == "slide_1") {
                    window.location.href = "test-selection-part1.html"

                    // //reset the set-up
                    // $(".clue-wrapper").stop();
                    // $(".clue-wrapper").fadeOut();
                    // $(".switch-btn").animate({ left: "35vw" }, 900);
                    // setTimeout(function () {
                    //     $(".instruction-text").text("Move the slider to control the sample's speed.")
                    // }, 550);
                    // $(".clue-wrapper").css({ left: "29vw" });
                    // $(".clue-wrapper").fadeIn();
                    // clueMoving = false;

                }
            });

            document.addEventListener('keydown', function (event) {
                switch (event.key) {
                    case "Enter": //Enter key
                        // if (!clueMoving) {
                        //     $(".switch-btn").animate({ left: "62vw" }, 900);
                        //     setTimeout(function () {
                        //         if (isHydrodynamic) {
                        //             $(".instruction-text").text("Press [Enter] to start again.")
                        //             $(".clue-wrapper").animate({ left: "62vw" }, 2000);
                        //             $(".clue-wrapper").fadeOut();
                        //         } else {
                        //             $(".instruction-text").text("Press [Enter] to start again.")
                        //             $(".clue-wrapper").animate({ left: "62vw" }, 30000);
                        //             $(".clue-wrapper").fadeOut();
                        //         }
                        //         //record that test has been done
                        //         localStorage.setItem('firstClueHydrodynamicTest', true);
                        //     }, 800);
                        //     clueMoving = true;
                        // } else {
                        //     $(".clue-wrapper").stop();
                        //     $(".clue-wrapper").fadeOut();
                        //     $(".switch-btn").animate({ left: "35vw" }, 900);
                        //     setTimeout(function () {
                        //         $(".instruction-text").text("Press [Enter] to move the slider.")
                        //     }, 550);
                        //     $(".clue-wrapper").css({ left: "29vw" });
                        //     $(".clue-wrapper").fadeIn();
                        //     clueMoving = false;
                        // }
                        break;
                    case "ArrowLeft":
                        window.location.href = "test-selection-part1.html"
                        break;
                    default:
                        return;
                }
            });

        });

    </script>

</body>

</html>